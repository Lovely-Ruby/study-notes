<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>fetch</title>
  </head>
  <body>
    <button style="width: 500px; height: 300px">点我</button>
    <!-- <form action="" enctype="application/x-www-form-urlencoded"></form> -->
  </body>
  <script>
    document.querySelector('button').addEventListener('click', function () {
      let myHeader = new Headers();
      myHeader.append('Content-type', 'application/json');
      myHeader.append('my-Test', '123');

      fetch('/fetchtest', {
        method: 'post',
        body: JSON.stringify({ name: '张三' }), // 发送的内容写在body里了，相当于 axios 中的 data
        headers: myHeader,
        // content-type 描述的东西要和 body 对应上！
      })
        .then((res1) => {
          console.log('res1:>>', res1); // 并不是我们想要的结果，而是 response 对象
          // return res1.text()
          // return res1.clone()      // 对当前数据进行  深拷贝
          return res1.json(); // 返还个 json，在第二个then 里能用到
        })
        .then((res2) => {
          console.log('res2:>>', res2);
        });
    });
  </script>
</html>
